<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Character Turnaround</title>
<style>
/* ===== BODY & BACKGROUND ===== */
body {
  background: 
    linear-gradient(to bottom, rgba(255,255,255,0.3), rgba(255,255,255,0) 20%),
    linear-gradient(to bottom, rgba(0,0,0,0) 40%, rgba(0,0,0,0.4) 100%),
    #a25647;
  background-blend-mode: overlay;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  overflow: hidden;
  transition: background 0.5s ease;
}

/* ===== CONTAINER ===== */
.container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* ===== CHARACTER TITLE ===== */
#charName {
  position: absolute;
  top: -30px; 
  font-size: 32px; 
  font-weight: 800;
  color: white;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
  z-index: 5;
  text-align: center;
  width: 100%;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .6s ease, transform .6s ease;
  pointer-events: none;
}
#charName.show {
  opacity: 1;
  transform: translateY(0);
}

/* ===== EFFECT CLASSES ===== */
.effect-rainbow {
  background: linear-gradient(90deg, #ff004c, #ffb800, #2cff72, #00e5ff, #8a2be2, #ff004c);
  background-size: 400% 100%;
  -webkit-background-clip: text;
          background-clip: text;
  color: transparent;
  animation: moveGradient 4s linear infinite;
}
@keyframes moveGradient { 0%{background-position:0% 0} 100%{background-position:400% 0} }

.effect-glitch {
  animation: glitchShift .6s infinite steps(2);
}
@keyframes glitchShift {
  0%   { text-shadow: 2px 0 #ff004c, -2px 0 #00e5ff; }
  50%  { text-shadow: -2px 0 #ff004c, 2px 0 #00e5ff; }
  100% { text-shadow: 2px 0 #ff004c, -2px 0 #00e5ff; }
}

.effect-flicker { animation: flicker 1.2s infinite; }
@keyframes flicker {
  0%, 19%, 21%, 23%, 80%, 100% { opacity: 1; }
  20%, 22%, 24% { opacity: .6; }
  81% { opacity: .85; }
}

.effect-shadowPulse { animation: shadowPulse 1.4s ease-in-out infinite; }
@keyframes shadowPulse {
  0%,100% { text-shadow: 0 0 6px rgba(255,255,255,.6), 0 0 18px rgba(255,255,255,.3); }
  50% { text-shadow: 0 0 12px rgba(255,255,255,.9), 0 0 28px rgba(255,255,255,.5); }
}

/* ===== CHARACTER ===== */
#character {
  object-fit: contain;
  z-index: 2;
  transition: filter 0.3s ease;
}

.glow {
  filter: drop-shadow(0 0 15px #fff) drop-shadow(0 0 30px #fff);
}

/* ===== BUTTONS ===== */
#buttons {
  margin-top: 20px;
  display: flex;
  gap: 20px;
  font-size: 50px;
  justify-content: center;
  user-select: none;
  z-index: 3;
}

button {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 50px;
  outline: none;
  transition: transform 0.2s ease;
}

.arrowBtn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 50px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 4;
}
.arrowBtn.left { left: 5vw; }
.arrowBtn.right { right: 5vw; }

/* ===== LOGOS ===== */
#topLogo {
  width: 350px;
  position: absolute;
  top: -80px;
  z-index: 6;
  left: 50%;
  transform: translateX(-50%);
}

#logo {
  width: 320px;
  position: absolute;
  bottom: -50px;
  z-index: 6;
  left: 50%;
  transform: translateX(-50%);
}

/* ===== SNOW CANVAS ===== */
.snowCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
}
</style>
</head>
<body>

<canvas class="snowCanvas" id="snowCanvas"></canvas>

<div class="container">
  <div id="charName"></div>
  <img id="character" src="" alt="Character">

  <div id="buttons">
    <button id="turnBtn">üîÑ</button>
    <button id="effectBtn">‚ú®</button>
    <button id="paintBtn">üé®</button>
  </div>

  <img id="topLogo" src="https://i.postimg.cc/J4jjNvTq/memspin1.png" alt="Top Logo">
  <img id="logo" src="https://i.postimg.cc/Jhbq2Yzd/power2f.png" alt="Bottom Logo">
</div>

<button class="arrowBtn left" id="prevChar">‚¨ÖÔ∏è</button>
<button class="arrowBtn right" id="nextChar">‚û°Ô∏è</button>

<script>
const FORCE_UPPERCASE = true;
const ENABLE_TITLE_EFFECTS = true;
const EFFECTS_POOL = ["effect-rainbow","effect-glitch","effect-flicker","effect-shadowPulse"];

const characters = [
  { name: "Billie", frames: ["https://i.postimg.cc/0Nnd1g1C/UnoRe.png","https://i.postimg.cc/KYxrWGwz/DosRe.png","https://i.postimg.cc/654021C9/TresRe.png","https://i.postimg.cc/cLqcQMcf/CuatroRe.png","https://i.postimg.cc/YC1z8GXZ/CincoRe.png"], size: 0.95, spinSpeed: 230 },
  { name: "Finn", frames: ["https://i.postimg.cc/nLyzPYHZ/FinnUNO.png","https://i.postimg.cc/gksx2ZKq/FINNDOS.png","https://i.postimg.cc/7LGh9Qrm/FINNTRES.png","https://i.postimg.cc/hPcJnrVt/FINNCUATRO.png","https://i.postimg.cc/65PyZNDy/FINNCINCO.png","https://i.postimg.cc/13zfn3Cx/FINNSEIS.png","https://i.postimg.cc/yYpSTRS6/FINNSIETE.png","https://i.postimg.cc/prYp8hMv/FINNOCHO.png"], size: 1.25, spinSpeed: 210 },
  { name: "Nippie", frames: ["https://i.postimg.cc/5y4Zq3Pn/NIPPIE1.png","https://i.postimg.cc/sX9kh8JM/NIPPIE2.png","https://i.postimg.cc/nzJ8MZq8/NIPPIE3.png","https://i.postimg.cc/wMwnWmZH/NIPPIE4.png","https://i.postimg.cc/T2Q82zwS/NIPPIE5.png","https://i.postimg.cc/kX502TR5/NIPPIE6.png"], size: 1.1, spinSpeed: 220 },
  { name: "Anon", frames: ["https://i.postimg.cc/yYZPj0zX/Anon1.png","https://i.postimg.cc/MZ451dgp/Anon2.png","https://i.postimg.cc/KjK5dM3b/Anon3.png","https://i.postimg.cc/RhjT9ZwH/Anon3B.png","https://i.postimg.cc/3xQZcW8M/Anon4.png","https://i.postimg.cc/fR7vnZyV/Anon5.png","https://i.postimg.cc/zf0Svjn5/Anon6.png","https://i.postimg.cc/d0qjJXZ4/Anon7.png","https://i.postimg.cc/FHfmBm43/Anon8.png"], size: 1.1, spinSpeed: 220 }
];

let currentCharIndex = 0;
let currentFrame = 0;
let intervalId;

const character = document.getElementById("character");
const turnBtn = document.getElementById("turnBtn");
const effectBtn = document.getElementById("effectBtn");
const paintBtn = document.getElementById("paintBtn");
const prevChar = document.getElementById("prevChar");
const nextChar = document.getElementById("nextChar");
const charName = document.getElementById("charName");

// Preload frames
characters.forEach(char => char.frames.forEach(src => { const img = new Image(); img.src = src; }));

function setCharacter() {
  const char = characters[currentCharIndex];
  currentFrame = 0;
  character.src = char.frames[currentFrame];
  character.style.width = 350 * char.size + "px";
  character.style.height = 350 * char.size + "px";

  let title = FORCE_UPPERCASE ? char.name.toUpperCase() : char.name;
  charName.textContent = title;
  charName.classList.add("show");
  if(ENABLE_TITLE_EFFECTS){
    let effect = EFFECTS_POOL[Math.floor(Math.random() * EFFECTS_POOL.length)];
    charName.className = "show " + effect;
  }
}
setCharacter();

function updateFrame() {
  const char = characters[currentCharIndex];
  currentFrame = (currentFrame + 1) % char.frames.length;
  character.src = char.frames[currentFrame];
}

// Spin button
turnBtn.addEventListener("click", updateFrame);
turnBtn.addEventListener("mousedown", () => {
  const char = characters[currentCharIndex];
  intervalId = setInterval(updateFrame, char.spinSpeed);
});
turnBtn.addEventListener("mouseup", () => clearInterval(intervalId));
turnBtn.addEventListener("mouseleave", () => clearInterval(intervalId));
turnBtn.addEventListener("touchstart", (e) => {
  e.preventDefault();
  const char = characters[currentCharIndex];
  intervalId = setInterval(updateFrame, char.spinSpeed);
});
turnBtn.addEventListener("touchend", () => clearInterval(intervalId));

// Glow toggle
effectBtn.addEventListener("click", () => character.classList.toggle("glow"));

// Background color cycling
const hues = ["#a25647", "#4a90e2", "#f5a623", "#7ed321", "#9b59b6"];
let hueIndex = 0;
paintBtn.addEventListener("click", () => {
  hueIndex = (hueIndex + 1) % hues.length;
  document.body.style.background = hues[hueIndex];
});

// Character navigation
prevChar.addEventListener("click", () => {
  currentCharIndex = (currentCharIndex - 1 + characters.length) % characters.length;
  setCharacter();
});
nextChar.addEventListener("click", () => {
  currentCharIndex = (currentCharIndex + 1) % characters.length;
  setCharacter();
});

// ===== SNOW EFFECT =====
const canvas = document.getElementById("snowCanvas");
const ctx = canvas.getContext("2d");
let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

const numFlakes = 120;
const flakes = [];

function createFlakes() {
  for(let i=0;i<numFlakes;i++){
    flakes.push({
      x: Math.random()*width,
      y: Math.random()*height,
      radius: Math.random()*3+1,
      speed: Math.random()*1.5+0.5,
      drift: Math.random()*1.5-0.75,
      opacity: Math.random()*0.8+0.2
    });
  }
}

function drawFlakes() {
  ctx.clearRect(0,0,width,height);
  ctx.fillStyle = "white";
  ctx.beginPath();
  for(let flake of flakes){
    ctx.globalAlpha = flake.opacity;
    ctx.moveTo(flake.x,flake.y);
    ctx.arc(flake.x,flake.y,flake.radius,0,Math.PI*2);
  }
  ctx.fill();
  ctx.globalAlpha = 1;
  updateFlakes();
}

function updateFlakes() {
  for(let flake of flakes){
    flake.y += flake.speed;
    flake.x += flake.drift;
    if(flake.y>height){ flake.y=0; flake.x=Math.random()*width; }
    if(flake.x>width) flake.x=0;
    if(flake.x<0) flake.x=width;
  }
}

function animateSnow(){
  drawFlakes();
  requestAnimationFrame(animateSnow);
}

window.addEventListener("resize", () => {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
});

createFlakes();
animateSnow();
</script>

</body>
</html>
